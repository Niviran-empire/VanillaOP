namespace = vop_ai_fixed
country_event = { inline_script = { 
	script = pop_categories_version/pcv_notification_event_script 
	ID = vop_ai_fixed.4 TARGET = vop_ai_fixed.7 TYPE = str_debug_check_trigger
} }
ship_event = { inline_script = { 
	script = pop_categories_version/pcv_effect_event_script 
	ID = vop_ai_fixed.7 
} }
country_event = {
	id = vop_ai_fixed.23
	hide_window = yes
	is_triggered_only = yes

	trigger = { is_ai = yes }

	immediate = {
		if = {
			limit = { NOT = { is_variable_set = TT_var_ascension_breakthrough_times } }
			set_variable = { which = TT_var_ascension_breakthrough_times value = 1 }
		}
		else_if = {
			limit = {
				is_variable_set = TT_var_ascension_breakthrough_times
				resource_stockpile_compare = {
					resource = unity
					value >= 25000
					mult = TT_var_ascension_breakthrough_times
				}
			}
			add_resource = {
				unity = -5000
				mult = TT_var_ascension_breakthrough_times
			}
			remove_modifier = TT_mod_ascension_breakthrough
			remove_modifier = TT_mod_ascension_breakthrough_EACI
			if = {#原版加凝聚力
				limit = { NOT = { has_global_flag = cultural_overhaul_active } }
				add_modifier = {
					modifier = TT_mod_ascension_breakthrough
					multiplier = TT_var_ascension_breakthrough_times
					days = -1
				}
			}
			else_if = {#无限思潮mod加行政管理
				limit = { has_global_flag = cultural_overhaul_active }
				add_modifier = {
					modifier = TT_mod_ascension_breakthrough_EACI
					multiplier = TT_var_ascension_breakthrough_times
					days = -1
				}
			}
			change_variable = { which = TT_var_ascension_breakthrough_times value = 1 }
		}
	}
}
country_event = {
	id = vop_ai_fixed.24
	hide_window = yes
	is_triggered_only = yes

	trigger = { 
		has_global_flag = tidy_tradition_active
		OR = {
			AND = {
				NOT = { has_tradition = tr_tt_liberation_finish }
				any_owned_planet = {
					has_modifier = TT_mod_PLNT_happy_specialist
					has_modifier = TT_mod_PLNT_happy_worker
					has_modifier = TT_mod_PLNT_happy_planet
				}
			}
			AND = {
				has_tradition = tr_tt_liberation_finish
				any_owned_planet = {
					NOR = {
						has_modifier = TT_mod_PLNT_happy_specialist
						has_modifier = TT_mod_PLNT_happy_worker
						has_modifier = TT_mod_PLNT_happy_planet
					}
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_tradition = tr_tt_liberation_finish }
			}
			every_owned_planet = {
				limit = {
					has_modifier = TT_mod_PLNT_happy_specialist
					has_modifier = TT_mod_PLNT_happy_worker
					has_modifier = TT_mod_PLNT_happy_planet
				}
				remove_modifier = TT_mod_PLNT_happy_specialist
				remove_modifier = TT_mod_PLNT_happy_worker
				remove_modifier = TT_mod_PLNT_happy_planet
			}
		}
		if = {
			limit = {
				has_tradition = tr_tt_liberation_finish
			}
			every_owned_planet = {
				limit = {
					NOR = {
						has_modifier = TT_mod_PLNT_happy_specialist
						has_modifier = TT_mod_PLNT_happy_worker
						has_modifier = TT_mod_PLNT_happy_planet
					}
				}
				add_modifier = {
					modifier = TT_mod_PLNT_happy_specialist
					days = -1
				}
				add_modifier = {
					modifier = TT_mod_PLNT_happy_worker
					days = -1
				}
				add_modifier = {
					modifier = TT_mod_PLNT_happy_planet
					days = -1
				}
				remove_modifier = TT_mod_PLNT_happy_specialist
				remove_modifier = TT_mod_PLNT_happy_worker
			}
		}
	}
}
event = {
	id = vop_ai_fixed.1
	hide_window = yes
	is_triggered_only = yes
	immediate = { 
		set_global_flag = VOP_MOD_INSTALL
		set_global_flag = force_disable_aow_megastructure
		set_global_flag = force_adjust_aow_megastructure_cap
		every_playable_country = { 
			limit = { is_ai = no } 
			country_event = { id = vop_ai_fixed.2 } 
			country_event = { id = vop_ai_fixed.3 } 
		} 
	}
}
country_event = {
	id = vop_ai_fixed.2
	title = vop_ai_fixed.title
	desc = vop_ai_fixed.desc
	picture = GFX_evt_society_cache
	show_sound = event_scanner
	is_advisor_event = yes
	is_triggered_only = yes
	trigger = { is_ai = no }
	option = { name = vop_ai_fixed.a }
}

country_event = {
	id = vop_ai_fixed.3
	hide_window = yes
	is_triggered_only = yes
	trigger = { exists = event_target:global_event_country }
	immediate = {
		if = {
			limit = { is_ai = yes NOT = { has_country_flag = has_str_ai_modifier } }
			add_modifier = { modifier = str_ai_modifier } set_country_flag = has_str_ai_modifier 
		}
		event_target:global_event_country = {
			vop_debug_system_modifier = { TYPE = Kuat ORDER = 1 }
			vop_debug_system_modifier = { TYPE = Kuat ORDER = 2 }
			vop_debug_system_modifier = { TYPE = Kuat ORDER = 3 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 1 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 2 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 3 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 4 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 5 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 6 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 7 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 8 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 9 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 10 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 11 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 12 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 13 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 14 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 15 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 16 }
			vop_debug_system_modifier = { TYPE = NOVERA ORDER = 17 }
		}
	}
}


namespace = PF_evt_MISC
###[vop_ai_fixed]
###_[pf新殖民地]
#_<on_colonized>
planet_event = {
	id = PF_evt_MISC.22
	hide_window = yes
	is_triggered_only = yes
	trigger = { always = no }
	immediate = {
		#_[迁出禁止]默认
		remove_planet_flag = PF_flg_plnt_mig_prio
		remove_planet_flag = PF_flg_plnt_mig_forced
		set_planet_flag = PF_flg_plnt_mig_ignore
	}
}