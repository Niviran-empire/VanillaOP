##############################
##############################
### SYNTHETIC DAWN events ###
### by Maximilian Olbers, ###
### Miranda van den Brink, ###
### & Dee Majek				###
##############################
##############################

namespace = syndaw
# Event that starts Situation (Machine Uprising)
planet_event = { # does this unit have a soul
	id = syndaw.545
	title = syndaw.545.name
	desc = syndaw.545.desc
	picture = GFX_evt_synth_organic_relations
	show_sound = robot_arthopoid_greetings
	location = root
	is_triggered_only = yes

	trigger = {
		host_has_dlc = "Synthetic Dawn Story Pack"
		always = no
	}

	immediate = {
		owner = {
			if = {
				limit = {
					NOT = { has_country_flag = situation_machine_uprising_started }
				}
				# Start Machine Uprising Situation, before player can Outlaw AI.
				start_situation = {
					type = situation_machine_uprising
					target = this
				}
				hidden_effect = {
					# Prevent same situation from happening again.
					set_country_flag = situation_machine_uprising_started
				}
			}
		}
	}

	option = {
		name = syndaw.545.a
		custom_tooltip = syndaw.545.a.tooltip
		tooltip = {
			owner = {
				start_situation = {
					type = situation_machine_uprising
					target = this
				}
			}
		}
		hidden_effect = {
			owner = {
				every_situation = {
					limit = { is_situation_type = situation_machine_uprising }
					change_variable = { which = var_cruelty_to_robots value = 1 }
				}
			}
		}
	}

	option = {
		name = syndaw.545.b
		custom_tooltip = syndaw.545.b.tooltip
		tooltip = {
			owner = {
				start_situation = {
					type = situation_machine_uprising
					target = this
				}
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = robots_have_souls
				every_situation = {
					limit = { is_situation_type = situation_machine_uprising }
					change_variable = { which = var_cruelty_to_robots value = -2 }
				}
			}
		}
	}

	option = {
		trigger = {
			owner = {
				OR = {
					has_ethic = ethic_materialist
					has_ethic = ethic_fanatic_materialist
				}
			}
		}
		name = syndaw.545.c
		custom_tooltip = syndaw.545.c.tooltip
		tooltip = {
			owner = { start_situation = {
				type = situation_machine_uprising
				target = this
			} }
		}
	}
}