namespace = pop
### Pop Self Modification
pop_event = {
	id = pop.1
	title = "pop.1.name"
	desc = "pop.1.desc"
	picture = GFX_evt_cybernetics

	is_triggered_only = yes

	trigger = {
		always = no
	}

	immediate = {

		planet = {
			owner = { set_country_flag = pop_modification }
			set_planet_flag = pop_modification
			create_species = {
				is_mod = yes
				name = this
				plural = this
				class = this
				portrait = this
				traits = {
					trait = trait_self_modified
					trait = random_traits
				}
				homeworld = this
			}
			if = {
				limit = {
					owner = {
						has_trait = trait_necrophage
					}
				}
				last_created_species = {
					modify_species = {
						species = this
						add_trait = trait_necrophage
						change_scoped_species = no
					}
				}
			}
		}

		if = {
			limit = {
				planet = {
					count_owned_pop = {
						limit = {
							is_same_species = ROOT
						}
						count < 6
					}
				}
			}
			planet = {
				random_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					change_species = last_created_species
					set_pop_flag = modified_pop_1
				}
				random_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					change_species = last_created_species
					set_pop_flag = modified_pop_1
				}
				random_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					save_event_target_as = non_modified_pop_1
				}
				every_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					set_pop_flag = non_modified_pop_1
				}
				random_owned_pop = {
					limit = {
						is_pop = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					change_species = last_created_species
					save_event_target_as = modified_pop_1
					set_pop_flag = modified_pop_1
				}
			}
		}
		if = {
			limit = {
				planet = {
					count_owned_pop = {
						limit = {
							is_same_species = ROOT
						}
						count > 6
					}
				}
			}
			planet = {
				random_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					change_species = last_created_species
					set_pop_flag = modified_pop_1
				}
				random_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					change_species = last_created_species
					set_pop_flag = modified_pop_1
				}
				random_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					change_species = last_created_species
					set_pop_flag = modified_pop_1
				}
				random_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					change_species = last_created_species
					set_pop_flag = modified_pop_1
				}
				random_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					save_event_target_as = non_modified_pop_1
				}
				every_owned_pop = {
					limit = {
						NOT = { is_pop = ROOT }
						is_same_species = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					set_pop_flag = non_modified_pop_1
				}
				random_owned_pop = {
					limit = {
						is_pop = ROOT
						is_enslaved = no
						is_being_purged = no
						is_robot_pop = no
					}
					save_event_target_as = modified_pop_1
					set_pop_flag = modified_pop_1
					change_species = last_created_species
				}
			}
		}
	}

	option = {
		name = "OK"
	}
}

# Rising Tensions (HIDDEN)
pop_event = {
	id = pop.2
	hide_window = yes

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	immediate = {
		save_event_target_as = modified_pop_1
		planet = {
			set_planet_flag = popmod_rising_tensions
			random_owned_pop = {
				limit = {
					NOT = { is_pop = ROOT }
					is_exact_same_species = owner
					is_enslaved = no
					is_being_purged = no
				}
				save_event_target_as = non_modified_pop_1
			}
		}
		planet = {
			planet_event = { id = pop.3 }
		}
	}
}

# Increased Fertility (HIDDEN)
pop_event = {
	id = pop.5
	hide_window = yes

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	immediate = {
		save_event_target_as = modified_pop_1
		planet = {
			set_planet_flag = popmod_fertility
			random_owned_pop = {
				limit = {
					NOT = { is_pop = ROOT }
					is_same_species = owner
					is_enslaved = no
					is_being_purged = no
					is_robot_pop = no
				}
				save_event_target_as = non_modified_pop_1
			}
		}
		planet = {
			planet_event = { id = pop.6 }
		}
	}
}

# Pureblood attack against Mutants (HIDDEN)
pop_event = {
	id = pop.7
	hide_window = yes

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	immediate = {
		save_event_target_as = modified_pop_1
		planet = {
			random_owned_pop = {
				limit = {
					NOT = { is_pop = ROOT }
					is_same_species = owner
					is_enslaved = no
					is_being_purged = no
					is_robot_pop = no
				}
				save_event_target_as = non_modified_pop_1
			}
		}
		planet = {
			planet_event = { id = pop.8 }
		}
	}
}

# Mutant attack against Purebloods (HIDDEN)
pop_event = {
	id = pop.9
	hide_window = yes

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	immediate = {
		save_event_target_as = non_modified_pop_1
		planet = {
			random_owned_pop = {
				limit = {
					has_pop_flag = modified_pop_1
					is_enslaved = no
					is_being_purged = no
					is_robot_pop = no
				}
				save_event_target_as = modified_pop_1
			}
		}
		planet = {
			planet_event = { id = pop.10 }
		}
	}
}

# Mutant representative (HIDDEN)
pop_event = {
	id = pop.11
	hide_window = yes

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	immediate = {
		save_event_target_as = modified_pop_1
		planet = {
			random_owned_pop = {
				limit = {
					NOT = { is_pop = ROOT }
					is_same_species = owner
					is_enslaved = no
					is_being_purged = no
					is_robot_pop = no
				}
				save_event_target_as = non_modified_pop_1
			}
		}
		planet = {
			planet_event = { id = pop.12 }
		}
	}
}

# Increased Strength (HIDDEN)
pop_event = {
	id = pop.13
	hide_window = yes

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		always = no
	}

	immediate = {
		save_event_target_as = modified_pop_1
		planet = {
			set_planet_flag = popmod_strength
			random_owned_pop = {
				limit = {
					NOR = {
						is_pop = ROOT
						has_trait = trait_strong
					}
					is_same_species = owner
					is_enslaved = no
					is_being_purged = no
					is_robot_pop = no
				}
				save_event_target_as = non_modified_pop_1
			}
		}
		planet = {
			planet_event = { id = pop.14 }
		}
	}
}