namespace = ge_affection
country_event = {
	###科学家领导科研时加好感值
	id = ge_affection.23
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		years_passed < 50
		has_country_flag = ge_leader_suigintou_get
		research_leader = {
			area = society
			OR = {
				has_trait = leader_trait_ge_mercury_lamp_scientist
				has_leader_flag = ge_suigintou_flag
			}
		}
	}
	immediate = {
		every_owned_leader = {
			limit = {
				OR = {
					has_leader_flag = ge_suigintou_flag
					has_trait = leader_trait_ge_mercury_lamp
					has_trait = leader_trait_ge_mercury_lamp_scientist
				}
			}
			ge_add_aft_scientist_on_research = yes
		}
	}
}

namespace = sop_skill_scientist
country_event = {	#知识分享计数器
	id = sop_skill_scientist.6
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		years_passed < 50
		has_country_flag = star_oath_project_has_used
	}

	immediate = {
		set_update_modifiers_batch = begin
		if = {
			limit = {
				any_owned_leader = {
					is_researching_area = engineering
					OR = {
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_1
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_2
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_3
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_4
					}
				}
			}
			change_variable = {
				which = count_sop_country_knowledge_sharing
				value = 1
			}
		}
		if = {
			limit = {
				any_owned_leader = {
					is_researching_area = society
					OR = {
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_1
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_2
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_3
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_4
					}
				}
			}
			change_variable = {
				which = count_sop_country_knowledge_sharing
				value = 1
			}
		}
		if = {
			limit = {
				any_owned_leader = {
					is_researching_area = physics
					OR = {
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_1
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_2
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_3
						has_trait = leader_trait_scientist_SOP_knowledge_sharing_4
					}
				}
			}
			change_variable = {
				which = count_sop_country_knowledge_sharing
				value = 1
			}
		}
		set_update_modifiers_batch = end
	}
}

country_event = {
	id = sop_skill_scientist.101
	is_triggered_only = yes
	hide_window = yes

	trigger = {
		years_passed < 50
		has_country_flag = star_oath_project_has_used
	}

	immediate = {
		set_update_modifiers_batch = begin
		if = {
			limit = {
				any_owned_leader = {
					OR = {
						is_researching_area = engineering
						is_researching_area = society
						is_researching_area = physics
					}
					has_trait = leader_trait_scientist_SOP_belfast_T1
				}
			}
			every_owned_leader = {
				limit = {
					sop_leader_trigger = yes
				}
				add_experience = 20
			}
			root = {
				change_variable = {
					which = sop_belfas_skill_has_used_count
					value = 1
				}
			}
		}
		else_if = {
			limit = {
				any_owned_leader = {
					OR = {
						is_researching_area = engineering
						is_researching_area = society
						is_researching_area = physics
					}
					has_trait = leader_trait_scientist_SOP_belfast_T2
				}
			}
			every_owned_leader = {
				limit = {
					sop_leader_trigger = yes
				}
				add_experience = 40
			}
			root = {
				change_variable = {
					which = sop_belfas_skill_has_used_count
					value = 2
				}
			}
		}
		else_if = {
			limit = {
				any_owned_leader = {
					OR = {
						is_researching_area = engineering
						is_researching_area = society
						is_researching_area = physics
					}
					has_trait = leader_trait_scientist_SOP_belfast_T3
				}
			}
			every_owned_leader = {
				limit = {
					sop_leader_trigger = yes
				}
				add_experience = 60
			}
			root = {
				change_variable = {
					which = sop_belfas_skill_has_used_count
					value = 3
				}
			}
		}
		if = {
			limit = {
				any_owned_leader = {
					OR = {
						is_researching_area = engineering
						is_researching_area = society
						is_researching_area = physics
					}
					has_trait = leader_trait_scientist_SOP_okabe_T1
				}
			}
			every_owned_leader = {
				limit = {
					sop_leader_trigger = yes
				}
				add_experience = 10
			}
			root = {
				change_variable = {
					which = sop_belfas_skill_has_used_count
					value = 2
				}
			}
		}
		else_if = {
			limit = {
				any_owned_leader = {
					OR = {
						is_researching_area = engineering
						is_researching_area = society
						is_researching_area = physics
					}
					has_trait = leader_trait_scientist_SOP_okabe_T2
				}
			}
			every_owned_leader = {
				limit = {
					sop_leader_trigger = yes
				}
				add_experience = 20
			}
			root = {
				change_variable = {
					which = sop_belfas_skill_has_used_count
					value = 4
				}
			}
		}
		if = {
			limit = {
				any_owned_leader = {
					OR = {
						is_researching_area = engineering
						is_researching_area = society
						is_researching_area = physics
					}
					has_leader_flag = SOP_noel_mobius
				}
			}
			root = {
				change_variable = {
					which = count_noel_mobius_tech_finish
					value = 1
				}
			}
		}
		if = {
			limit = {
				any_owned_leader = {
					OR = {
						is_researching_area = engineering
						is_researching_area = society
						is_researching_area = physics
					}
					has_leader_flag = SOP_abigail
				}
			}
			root = {
				change_variable = {
					which = count_abigail_tech_finish
					value = 1
				}
			}
		}
		if = {
			limit = {
				any_owned_leader = {
					OR = {
						is_researching_area = engineering
						is_researching_area = society
						is_researching_area = physics
					}
					has_trait = leader_trait_scientist_SOP_reines_T3
				}
			}
			every_owned_leader = {
				limit = {
					sop_leader_trigger = yes
				}
				add_experience = 40
			}
		}
		if = {
			limit = {
				any_owned_leader = {
					OR = {
						is_researching_area = engineering
						is_researching_area = society
						is_researching_area = physics
					}
					has_leader_flag = SOP_patchouli
				}
			}
			random_list = {
				20 = {
					modifier = {
						add = -10
						any_owned_leader = {
							OR = {
								is_researching_area = engineering
								is_researching_area = society
								is_researching_area = physics
							}
							has_trait = leader_trait_scientist_SOP_patchouli_T2
						}
					}
					modifier = {
						add = -20
						any_owned_leader = {
							OR = {
								is_researching_area = engineering
								is_researching_area = society
								is_researching_area = physics
							}
							has_trait = leader_trait_scientist_SOP_patchouli_T3
						}
					}
				}
				10 ={
					random_list = {
						3 = {
							remove_modifier = sop_scientist_skill_patchouli_01
							add_modifier = {
								modifier = sop_scientist_skill_patchouli_01
								days = 90
							}
						}
						3 = {
							remove_modifier = sop_scientist_skill_patchouli_02
							add_modifier = {
								modifier = sop_scientist_skill_patchouli_02
								days = 90
							}
						}
						3 = {
							remove_modifier = sop_scientist_skill_patchouli_03
							add_modifier = {
								modifier = sop_scientist_skill_patchouli_03
								days = 90
							}
						}
						3 = {
							remove_modifier = sop_scientist_skill_patchouli_04
							add_modifier = {
								modifier = sop_scientist_skill_patchouli_04
								days = 90
							}
						}
						3 = {
							remove_modifier = sop_scientist_skill_patchouli_05
							add_modifier = {
								modifier = sop_scientist_skill_patchouli_05
								days = 90
							}
						}
						2 = {
							remove_modifier = sop_scientist_skill_patchouli_06
							add_modifier = {
								modifier = sop_scientist_skill_patchouli_06
								days = 90
							}
						}
						2 = {
							remove_modifier = sop_scientist_skill_patchouli_07
							add_modifier = {
								modifier = sop_scientist_skill_patchouli_07
								days = 90
							}
						}
					}
					if = {
						limit = {
							NOT = {
								has_country_flag = star_oath_not_use_sound
							}
						}
						random_list = {
							3 = {
								play_sound = SOP_patchouli_SkillActivationJP01
							}
							3 = {
								play_sound = SOP_patchouli_SkillActivationJP02
							}
						}
					}
				}
			}
		}
		set_update_modifiers_batch = end
	}
}

namespace = TT_ascension_breakthrough_ai
#AI专属飞升突破，强制AI点
country_event = {
	id = TT_ascension_breakthrough_ai.0
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		always = no
	}
	immediate = {
		if = {
			limit = { NOT = { is_variable_set = TT_var_ascension_breakthrough_times } }
			set_variable = { which = TT_var_ascension_breakthrough_times value = 1 }
		}
		else_if = {
			limit = {
				is_variable_set = TT_var_ascension_breakthrough_times
				resource_stockpile_compare = {
					resource = unity
					value >= 25000
					mult = TT_var_ascension_breakthrough_times
				}
			}
			add_resource = {
				unity = -5000
				mult = TT_var_ascension_breakthrough_times
			}
			remove_modifier = TT_mod_ascension_breakthrough
			remove_modifier = TT_mod_ascension_breakthrough_EACI
			if = {#原版加凝聚力
				limit = { NOT = { has_global_flag = cultural_overhaul_active } }
				add_modifier = {
					modifier = TT_mod_ascension_breakthrough
					multiplier = TT_var_ascension_breakthrough_times
					days = -1
				}
			}
			else_if = {#无限思潮mod加行政管理
				limit = { has_global_flag = cultural_overhaul_active }
				add_modifier = {
					modifier = TT_mod_ascension_breakthrough_EACI
					multiplier = TT_var_ascension_breakthrough_times
					days = -1
				}
			}
			change_variable = { which = TT_var_ascension_breakthrough_times value = 1 }
		}
	}
}