@noxious_happiness_penalty = -0.01
@pop_happiness_unemply_rate = 0.10
#################
#### pop_rule ###
#################
vop_optimaze_game_rule_system_sensor = {
	every_system = {
		remove_star_flag = can_enable_can_be_system_blocks_sensors
		if = {
			limit = { OR = {
				is_inside_nebula = yes
				has_modifier = space_storm
				has_modifier = zroni_storm
				has_modifier = queen_scorn_storm
				has_star_flag = lcluster
				has_star_flag = sealed_system
				has_star_flag = storm_system
			} }
			set_star_flag = can_enable_can_be_system_blocks_sensors
		}
	}
}
vop_optimaze_game_rule_can_vote_in_democratic_election = {
	remove_pop_group_flag = can_enable_pop_election_vote
	if = {
		limit = { 
			has_citizenship_rights = yes
			is_sapient = yes
			is_enslaved = no
			is_being_purged = no
		}
		set_pop_group_flag = can_enable_pop_election_vote
	}
}
vop_optimaze_game_rule_can_generate_leader_from_pop = {
	remove_pop_group_flag = can_enable_can_generate_leader_from_pop
	if = {
		limit = { 
			exists = owner
			OR = {
				has_citizenship_rights = yes
				has_citizenship_type = { type = citizenship_shroud_touched country = owner }
			}
			can_think = yes
			OR = {
				is_robot_pop_group = no
				owner = {
					OR = {
						has_technology = tech_synthetic_leaders
						is_machine_empire = yes
						is_mechanical_empire = yes
						is_individual_machine = yes
						has_country_flag = synthetic_fertility_no_bodies_left
					}
				}
			}
			OR = {
				is_same_species = owner
				owner = {
					NAND = {
						has_origin = origin_necrophage
						has_trait = trait_necrophage
					}
				}
			}
		}
		set_pop_group_flag = can_enable_can_generate_leader_from_pop
	}
}
vop_optimaze_game_rule_can_generate_military_leader_from_pop = {
	remove_pop_group_flag = can_enable_can_generate_military_leader_from_pop
	if = {
		limit = { 
			exists = owner
			OR = {
				has_citizenship_rights = yes
				has_citizenship_type = { type = citizenship_shroud_touched country = owner }
			}
			can_think = yes
			OR = {
				is_robot_pop_group = no
				owner = {
					OR = {
						has_technology = tech_synthetic_leaders
						is_machine_empire = yes
						is_mechanical_empire = yes
						is_individual_machine = yes
						has_country_flag = synthetic_fertility_no_bodies_left
					}
				}
			}
			OR = {
				is_same_species = owner
				owner = {
					NAND = {
						has_origin = origin_necrophage
						has_trait = trait_necrophage
					}
				}
			}
			can_be_military_leader = yes
		}
		set_pop_group_flag = can_enable_can_generate_military_leader_from_pop
	}
}
vop_optimaze_game_rule_is_new_colony = {
	remove_planet_flag = can_enable_is_new_colony
	if = {
		limit = { 
			is_colony = yes colony_age < 180 pop_amount < 1000 
			NOR = { 
				has_planet_flag = has_building_kuat_command_center_auto 
				has_planet_flag = synth_queen_bastille
			} 
		}
		set_planet_flag = can_enable_is_new_colony
	}
}

#################
#### pop_cate ###
#################
vop_optimaze_game_rule_can_is_phototrophic = {
	remove_species_flag = can_is_phototrophic
	if = {
		limit = { 
			OR = {
				has_trait = trait_plantoid_phototrophic
				has_trait = trait_plantoid_radiotrophic
			}
		}
		set_species_flag = can_is_phototrophic
	} 
}

#################
#### cnc_goal ###
#################
vop_optimaze_war_goals = {
	remove_country_flag = VOP_cb_CNTR_has_stop_colossus_cb
	remove_country_flag = VOP_cb_CNTR_has_total_war_cb_SECTION_1
	remove_country_flag = VOP_cb_CNTR_has_total_war_cb_SECTION_2
	remove_country_flag = VOP_cb_CNTR_has_total_war_cb_SECTION_3
	remove_country_flag = VOP_cb_CNTR_has_total_war_cb_SECTION_4
	if = {
		limit = { any_controlled_fleet = {
			is_ship_class = shipclass_military_special
			any_controlled_ship = { is_ship_size = colossus }
		} }
		set_country_flag = VOP_cb_CNTR_has_stop_colossus_cb
	}
	if = {
		limit = { VOP_cb_CNTR_has_total_war_cb_SECTION_1 = yes }
		set_country_flag = VOP_cb_CNTR_has_total_war_cb_SECTION_1
	}
	if = {
		limit = { VOP_cb_CNTR_has_total_war_cb_SECTION_2 = yes }
		set_country_flag = VOP_cb_CNTR_has_total_war_cb_SECTION_2
	}
	if = {
		limit = { VOP_cb_CNTR_has_total_war_cb_SECTION_3 = yes }
		set_country_flag = VOP_cb_CNTR_has_total_war_cb_SECTION_3
	}
	if = {
		limit = { VOP_cb_CNTR_has_total_war_cb_SECTION_4 = yes }
		set_country_flag = VOP_cb_CNTR_has_total_war_cb_SECTION_4
	}
}